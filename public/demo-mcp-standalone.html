<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Demo Standalone: shadcn/ui + MCP - FloresYa</title>

    <!-- Tailwind CSS -->
    <link href="/css/tailwind.css" rel="stylesheet" />
    <link href="/css/styles.css" rel="stylesheet" />

    <!-- Fuentes -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/images/favicon.ico" />

    <style>
      body {
        font-family: 'Inter', sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
      }

      .gradient-text {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .mcp-gradient {
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .demo-card {
        transition: all 0.3s ease;
      }

      .demo-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
      }

      .tool-card {
        transition: all 0.3s ease;
      }

      .tool-card:hover {
        transform: scale(1.02);
      }

      .result-card {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.3);
      }

      @keyframes pulse {
        0% {
          opacity: 1;
        }
        50% {
          opacity: 0.5;
        }
        100% {
          opacity: 1;
        }
      }

      .loading {
        animation: pulse 2s infinite;
      }
    </style>
  </head>
  <body class="bg-gradient-to-br from-purple-50 to-pink-50">
    <!-- Header -->
    <header class="bg-white shadow-sm border-b border-gray-200">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between h-16">
          <div class="flex items-center space-x-3">
            <img src="/images/logoFloresYa.jpeg" alt="FloresYa" class="h-10 w-10 rounded-lg" />
            <div>
              <h1 class="text-xl font-bold text-gray-900">FloresYa</h1>
              <p class="text-sm text-gray-500">Demo Standalone: shadcn/ui + MCP</p>
            </div>
          </div>

          <!-- Status Display -->
          <div
            id="status-display"
            class="px-4 py-2 rounded-lg bg-gray-500 text-white font-semibold flex items-center space-x-2"
          >
            <span id="status-text">‚ö™ Listo para conectar</span>
          </div>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <!-- Hero Section -->
      <section class="text-center mb-12">
        <h1 class="text-4xl md:text-5xl font-bold mb-4">
          <span class="gradient-text">Demo Standalone shadcn/ui + MCP</span>
        </h1>
        <p class="text-xl text-gray-600 mb-8">
          Versi√≥n independiente sin dependencias externas - Funciona directamente en el navegador
        </p>

        <!-- Component Demo Container -->
        <div id="component-demo" class="flex justify-center space-x-4 mb-8">
          <!-- Buttons will be rendered here -->
        </div>
      </section>

      <!-- shadcn/ui Components Showcase -->
      <section class="mb-12">
        <h2 class="text-2xl font-bold text-gray-900 mb-6 text-center">üé® Componentes shadcn/ui</h2>
        <div id="components-showcase" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          <!-- Components will be rendered here -->
        </div>
      </section>

      <!-- MCP Tools Demo -->
      <section class="mb-12">
        <h2 class="text-2xl font-bold text-gray-900 mb-6 text-center">ü§ñ Herramientas MCP</h2>
        <div id="mcp-tools-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
          <!-- Tool cards will be rendered here -->
        </div>
      </section>

      <!-- Test Section -->
      <section class="mb-12">
        <h2 class="text-2xl font-bold text-gray-900 mb-6 text-center">üß™ Probar Funcionalidad</h2>
        <div id="test-controls" class="flex justify-center space-x-4 mb-8">
          <!-- Test buttons will be rendered here -->
        </div>
      </section>

      <!-- Results Section -->
      <section id="results-section" class="mb-12 hidden">
        <h2 class="text-2xl font-bold text-gray-900 mb-6 text-center">üìã Resultados</h2>
        <div id="results-content" class="space-y-4">
          <!-- Results will be shown here -->
        </div>
      </section>
    </main>

    <!-- Footer -->
    <footer class="bg-white border-t border-gray-200 mt-16">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div class="text-center">
          <p class="text-gray-600">
            <span class="mcp-gradient font-semibold">shadcn/ui + MCP Integration</span> - Demo
            Standalone para FloresYa
          </p>
          <div class="mt-4 flex justify-center space-x-6">
            <a href="/" class="text-purple-600 hover:text-purple-800">Inicio</a>
            <a href="/demo-simple-mcp.html" class="text-purple-600 hover:text-purple-800"
              >Demo Simple</a
            >
            <a href="/demo-mcp-integration.html" class="text-purple-600 hover:text-purple-800"
              >Demo Completa</a
            >
          </div>
        </div>
      </div>
    </footer>

    <!-- Standalone Scripts -->
    <script type="module" src="/js/utils-standalone.js"></script>
    <script type="module" src="/js/components-standalone.js"></script>

    <!-- Main Demo Script -->
    <script type="module">
      import { mcpService } from '/js/utils-standalone.js'
      import {
        createButton,
        createCard,
        createCardHeader,
        createCardTitle,
        createCardDescription,
        createCardContent,
        createCardFooter,
        createAlert,
        createBadge
      } from '/js/components-standalone.js'

      // Initialize demo when DOM is loaded
      document.addEventListener('DOMContentLoaded', async () => {
        console.log('üöÄ Iniciando Demo Standalone...')
        await initializeDemo()
      })

      async function initializeDemo() {
        renderComponentDemo()
        renderComponentsShowcase()
        renderMCPTools()
        renderTestControls()
        updateStatus('ready', '‚úÖ Demo listo - Componentes funcionando')
      }

      function renderComponentDemo() {
        const container = document.getElementById('component-demo')

        // Primary Button
        const primaryBtn = createButton({
          variant: 'default',
          children: 'üé® Bot√≥n Primary',
          onClick: () => showComponentInfo('primary')
        })

        // Outline Button
        const outlineBtn = createButton({
          variant: 'outline',
          children: 'üé® Bot√≥n Outline',
          onClick: () => showComponentInfo('outline')
        })

        // Success Button
        const successBtn = createButton({
          className: 'bg-green-600 text-white hover:bg-green-700',
          children: '‚úÖ Bot√≥n Success',
          onClick: () => showComponentInfo('success')
        })

        container.appendChild(primaryBtn)
        container.appendChild(outlineBtn)
        container.appendChild(successBtn)
      }

      function renderComponentsShowcase() {
        const container = document.getElementById('components-showcase')

        // Button Card
        const buttonCard = createCard()
        buttonCard.appendChild(createCardHeader())
        buttonCard.querySelector('.flex').appendChild(createCardTitle('Button Component'))
        buttonCard
          .querySelector('.flex')
          .appendChild(createCardDescription('Botones con m√∫ltiples variantes y tama√±os'))

        const buttonContent = createCardContent()
        const buttonDemo = document.createElement('div')
        buttonDemo.className = 'space-y-2'

        const buttons = [
          { variant: 'default', text: 'Default' },
          { variant: 'outline', text: 'Outline' },
          { variant: 'secondary', text: 'Secondary' },
          { variant: 'ghost', text: 'Ghost' },
          { variant: 'link', text: 'Link' }
        ]

        buttons.forEach(btn => {
          const button = createButton({
            variant: btn.variant,
            size: 'sm',
            children: btn.text,
            className: 'w-full'
          })
          buttonDemo.appendChild(button)
        })

        buttonContent.appendChild(buttonDemo)
        buttonCard.appendChild(buttonContent)
        container.appendChild(buttonCard)

        // Card Component Card
        const cardComponentCard = createCard()
        cardComponentCard.appendChild(createCardHeader())
        cardComponentCard.querySelector('.flex').appendChild(createCardTitle('Card Component'))
        cardComponentCard
          .querySelector('.flex')
          .appendChild(createCardDescription('Tarjetas con estructura flexible'))

        const cardContent = createCardContent()
        cardContent.innerHTML = `
                <div class="space-y-2">
                    <p class="text-sm text-gray-600">Componente Card con:</p>
                    <ul class="text-sm text-gray-600 list-disc list-inside">
                        <li>Header con t√≠tulo y descripci√≥n</li>
                        <li>Content para contenido principal</li>
                        <li>Footer para acciones</li>
                        <li>M√∫ltiples variantes visuales</li>
                    </ul>
                </div>
            `

        const cardFooter = createCardFooter()
        const footerBtn = createButton({
          variant: 'outline',
          size: 'sm',
          children: 'Ver Ejemplos'
        })
        cardFooter.appendChild(footerBtn)

        cardComponentCard.appendChild(cardContent)
        cardComponentCard.appendChild(cardFooter)
        container.appendChild(cardComponentCard)

        // Alert Component Card
        const alertCard = createCard()
        alertCard.appendChild(createCardHeader())
        alertCard.querySelector('.flex').appendChild(createCardTitle('Alert Component'))
        alertCard
          .querySelector('.flex')
          .appendChild(createCardDescription('Alertas informativas contextuales'))

        const alertContent = createCardContent()
        const alertDemo = document.createElement('div')
        alertDemo.className = 'space-y-3'

        const alerts = [
          {
            title: 'Informaci√≥n',
            message: 'Este es un mensaje informativo de ejemplo.',
            variant: 'default'
          },
          { title: '√âxito', message: 'La operaci√≥n se complet√≥ exitosamente.', variant: 'default' },
          { title: 'Error', message: 'Ocurri√≥ un error en la operaci√≥n.', variant: 'destructive' }
        ]

        alerts.forEach(alert => {
          const alertComponent = createAlert({
            title: alert.title,
            children: `<p>${alert.message}</p>`,
            variant: alert.variant
          })
          alertDemo.appendChild(alertComponent)
        })

        alertContent.appendChild(alertDemo)
        alertCard.appendChild(alertContent)
        container.appendChild(alertCard)
      }

      function renderMCPTools() {
        const container = document.getElementById('mcp-tools-grid')

        const tools = [
          { name: 'recommend_flowers', icon: 'üåπ', description: 'Recomendaciones de flores' },
          { name: 'florist_chat', icon: 'üí¨', description: 'Chat con experto florista' },
          { name: 'analyze_sentiment', icon: 'üß†', description: 'An√°lisis de sentimiento' },
          { name: 'generate_content', icon: '‚úçÔ∏è', description: 'Generador de contenido' },
          { name: 'search_products', icon: 'üîç', description: 'B√∫squeda de productos' },
          { name: 'predict_sales', icon: 'üìà', description: 'Predicci√≥n de ventas' },
          { name: 'optimize_price', icon: 'üí∞', description: 'Optimizaci√≥n de precios' },
          { name: 'get_analytics', icon: 'üìä', description: 'An√°lisis avanzado' }
        ]

        tools.forEach(tool => {
          const toolCard = createCard({
            className: 'tool-card cursor-pointer hover:shadow-lg'
          })

          toolCard.addEventListener('click', () => testMCPTool(tool.name))

          const header = createCardHeader()
          header.appendChild(createCardTitle(`${tool.icon} ${tool.name}`))
          header.appendChild(createCardDescription(tool.description))

          toolCard.appendChild(header)
          container.appendChild(toolCard)
        })
      }

      function renderTestControls() {
        const container = document.getElementById('test-controls')

        const connectBtn = createButton({
          className:
            'bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:from-purple-700 hover:to-pink-700',
          children: 'üîå Conectar con MCP',
          onClick: connectMCP
        })

        const testAllBtn = createButton({
          variant: 'outline',
          children: 'üß™ Probar Todas',
          onClick: testAllTools
        })

        container.appendChild(connectBtn)
        container.appendChild(testAllBtn)
      }

      async function connectMCP() {
        updateStatus('connecting', 'üîÑ Conectando con MCP...')
        try {
          // For the standalone demo, we just initialize the mock service
          await mcpService.initializeConnection('demo', {
            command: 'node',
            args: ['mcp-server-avanzado.js']
          })

          updateStatus('connected', '‚úÖ Conectado con MCP (Mock)')
          showSuccessMessage('Conexi√≥n MCP demo establecida exitosamente')
        } catch (error) {
          updateStatus('error', '‚ùå Error de conexi√≥n')
          showErrorMessage(`Error conectando con MCP: ${error.message}`)
        }
      }

      async function testMCPTool(toolName) {
        if (!mcpService.isConnected()) {
          showErrorMessage('Primero debes conectar con MCP')
          updateStatus('error', '‚ùå No conectado')
          return
        }

        updateStatus('loading', `üîÑ Probando ${toolName}...`)

        try {
          // Prepare appropriate arguments based on the tool
          let args = { demo: true, timestamp: new Date().toISOString() }

          switch (toolName) {
            case 'recommend_flowers':
              args = { occasion: 'aniversario', budget: 50 }
              break
            case 'florist_chat':
              args = { question: '¬øC√≥mo cuidar un ramo de rosas?' }
              break
            case 'analyze_sentiment':
              args = { text: 'Me encantan estas flores, son hermosas y frescas' }
              break
            case 'generate_content':
              args = { topic: 'Ramo de Rosas Rojas Premium' }
              break
            case 'search_products':
              args = { query: 'rosas rojas', category: 'flores', limit: 5 }
              break
            default:
              args = { demo: true, timestamp: new Date().toISOString() }
          }

          const result = await mcpService.executeTool(toolName, args)

          showToolResult(toolName, result)
          updateStatus('connected', `‚úÖ ${toolName} ejecutado`)
        } catch (error) {
          showErrorMessage(`Error probando ${toolName}: ${error.message}`)
          updateStatus('error', '‚ùå Error en prueba')
        }
      }

      async function testAllTools() {
        if (!mcpService.isConnected()) {
          showErrorMessage('Primero debes conectar con MCP')
          updateStatus('error', '‚ùå No conectado')
          return
        }

        const tools = [
          'recommend_flowers',
          'florist_chat',
          'analyze_sentiment',
          'generate_content',
          'search_products'
        ]

        for (const tool of tools) {
          await testMCPTool(tool)
          await new Promise(resolve => setTimeout(resolve, 1000))
        }
      }

      function showToolResult(toolName, result) {
        const resultsSection = document.getElementById('results-section')
        const resultsContent = document.getElementById('results-content')

        resultsSection.classList.remove('hidden')

        const resultCard = createCard({
          className: 'result-card border-l-4 border-purple-500'
        })

        const header = createCardHeader()
        header.appendChild(createCardTitle(`üîß ${toolName}`))
        header.appendChild(
          createBadge({
            variant: 'secondary',
            children: new Date().toLocaleTimeString()
          })
        )

        const content = createCardContent()

        // Handle different result content types
        if (result.content && Array.isArray(result.content)) {
          const contentHTML = result.content
            .map(item => {
              if (item.type === 'text') {
                // Format the text content with markdown-like processing
                let text = item.text
                // Convert bold markers to HTML
                text = text.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                // Convert newlines to line breaks
                text = text.replace(/\n/g, '<br>')
                return `<div class="text-sm text-gray-700 whitespace-pre-wrap">${text}</div>`
              }
              return `<div class="text-sm text-gray-700">[Unsupported content type: ${item.type}]</div>`
            })
            .join('')

          content.innerHTML = contentHTML
        } else {
          content.innerHTML = `<div class="text-sm text-gray-700">Resultado sin formato: ${JSON.stringify(result, null, 2)}</div>`
        }

        resultCard.appendChild(header)
        resultCard.appendChild(content)

        // Add to top of results
        resultsContent.insertBefore(resultCard, resultsContent.firstChild)

        // Keep only last 5 results
        while (resultsContent.children.length > 5) {
          resultsContent.removeChild(resultsContent.lastChild)
        }

        resultsSection.scrollIntoView({ behavior: 'smooth' })
      }

      function showComponentInfo(type) {
        const messages = {
          primary: '‚úÖ Bot√≥n Primary: Variante principal para acciones principales',
          outline: 'üé® Bot√≥n Outline: Estilo con borde para acciones secundarias',
          success: '‚úÖ Bot√≥n Success: Color verde para indicar √©xito'
        }

        showSuccessMessage(messages[type] || 'Componente shadcn/ui funcionando')
      }

      function showSuccessMessage(message) {
        showAlert(message, 'success')
      }

      function showErrorMessage(message) {
        showAlert(message, 'error')
      }

      function showAlert(message, type) {
        const resultsSection = document.getElementById('results-section')
        const resultsContent = document.getElementById('results-content')

        resultsSection.classList.remove('hidden')

        const alert = createAlert({
          title: type === 'success' ? '‚úÖ √âxito' : '‚ùå Error',
          children: `<p>${message}</p>`,
          variant: type === 'success' ? 'default' : 'destructive'
        })

        resultsContent.insertBefore(alert, resultsContent.firstChild)
        resultsSection.scrollIntoView({ behavior: 'smooth' })
      }

      function updateStatus(status, message) {
        const statusElement = document.getElementById('status-display')
        const statusText = document.getElementById('status-text')

        const statusConfig = {
          ready: { bg: 'bg-green-500' },
          connecting: { bg: 'bg-yellow-500 loading' },
          connected: { bg: 'bg-blue-500' },
          loading: { bg: 'bg-purple-500 loading' },
          error: { bg: 'bg-red-500' }
        }

        const config = statusConfig[status] || statusConfig.ready
        statusElement.className = `px-4 py-2 rounded-lg text-white font-semibold flex items-center space-x-2 ${config.bg}`
        statusText.textContent = message
      }
    </script>
  </body>
</html>
